{"source":2,"revision":5,"description":null,"createdBy":{"displayName":"Safia Habib","url":"https://app.vssps.visualstudio.com/A430bc36c-817f-4d6f-ab28-91ed04b1d4f7/_apis/Identities/067a06f8-8dc4-6464-a496-111deb63d372","_links":{"avatar":{"href":"https://dev.azure.com/unbreakablepipeline/_apis/GraphProfile/MemberAvatars/aad.MDY3YTA2ZjgtOGRjNC03NDY0LWE0OTYtMTExZGViNjNkMzcy"}},"id":"067a06f8-8dc4-6464-a496-111deb63d372","uniqueName":"safia.abdullah@gmail.com","imageUrl":"https://dev.azure.com/unbreakablepipeline/_api/_common/identityImage?id=067a06f8-8dc4-6464-a496-111deb63d372","descriptor":"aad.MDY3YTA2ZjgtOGRjNC03NDY0LWE0OTYtMTExZGViNjNkMzcy"},"createdOn":"2019-01-24T18:52:03.617Z","modifiedBy":{"displayName":"Safia Habib","url":"https://app.vssps.visualstudio.com/A430bc36c-817f-4d6f-ab28-91ed04b1d4f7/_apis/Identities/067a06f8-8dc4-6464-a496-111deb63d372","_links":{"avatar":{"href":"https://dev.azure.com/unbreakablepipeline/_apis/GraphProfile/MemberAvatars/aad.MDY3YTA2ZjgtOGRjNC03NDY0LWE0OTYtMTExZGViNjNkMzcy"}},"id":"067a06f8-8dc4-6464-a496-111deb63d372","uniqueName":"safia.abdullah@gmail.com","imageUrl":"https://dev.azure.com/unbreakablepipeline/_api/_common/identityImage?id=067a06f8-8dc4-6464-a496-111deb63d372","descriptor":"aad.MDY3YTA2ZjgtOGRjNC03NDY0LWE0OTYtMTExZGViNjNkMzcy"},"modifiedOn":"2019-01-28T13:42:37.303Z","isDeleted":false,"variables":{"Dynatrace_Tenant":{"value":"<Enter your tenant information>"},"Dynatrace_Token":{"value":"<Enter your token> "}},"variableGroups":[],"environments":[{"id":1,"name":"CreateUtilitles","rank":1,"owner":{"displayName":"Safia Habib","url":"https://app.vssps.visualstudio.com/A430bc36c-817f-4d6f-ab28-91ed04b1d4f7/_apis/Identities/067a06f8-8dc4-6464-a496-111deb63d372","_links":{"avatar":{"href":"https://dev.azure.com/unbreakablepipeline/_apis/GraphProfile/MemberAvatars/aad.MDY3YTA2ZjgtOGRjNC03NDY0LWE0OTYtMTExZGViNjNkMzcy"}},"id":"067a06f8-8dc4-6464-a496-111deb63d372","uniqueName":"safia.abdullah@gmail.com","imageUrl":"https://dev.azure.com/unbreakablepipeline/_api/_common/identityImage?id=067a06f8-8dc4-6464-a496-111deb63d372","descriptor":"aad.MDY3YTA2ZjgtOGRjNC03NDY0LWE0OTYtMTExZGViNjNkMzcy"},"variables":{},"variableGroups":[],"preDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":1}],"approvalOptions":{"requiredApproverCount":null,"releaseCreatorCanBeApprover":false,"autoTriggeredAndPreviousEnvironmentApprovedCanBeSkipped":false,"enforceIdentityRevalidation":false,"timeoutInMinutes":0,"executionOrder":1}},"deployStep":{"id":2},"postDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":3}],"approvalOptions":{"requiredApproverCount":null,"releaseCreatorCanBeApprover":false,"autoTriggeredAndPreviousEnvironmentApprovedCanBeSkipped":false,"enforceIdentityRevalidation":false,"timeoutInMinutes":0,"executionOrder":2}},"deployPhases":[{"deploymentInput":{"parallelExecution":{"parallelExecutionType":0},"skipArtifactsDownload":false,"artifactsDownloadInput":{"downloadInputs":[]},"queueId":51,"demands":[],"enableAccessToken":false,"timeoutInMinutes":0,"jobCancelTimeoutInMinutes":1,"condition":"succeeded()","overrideInputs":{}},"rank":1,"phaseType":1,"name":"Agent job","refName":null,"workflowTasks":[{"environment":{},"taskId":"94a74903-f93f-4075-884f-dc11f34058b4","version":"2.*","name":"Azure Deployment:Create Or Update Resource Group action on VstsResourceGroup-vstspipeline","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"ConnectedServiceName":"167cc6dc-cc14-40df-aadb-9ab505b378b1","action":"Create Or Update Resource Group","resourceGroupName":"VstsResourceGroup-vstspipeline","location":"South Central US","templateLocation":"Linked artifact","csmFileLink":"","csmParametersFileLink":"","csmFile":"$(System.DefaultWorkingDirectory)/_UnbreakablePipelineDemo-CI/ArmTemplates/FunctionsArmTemplate.json","csmParametersFile":"$(System.DefaultWorkingDirectory)/_UnbreakablePipelineDemo-CI/ArmTemplates/functionarmTemplate.prameters.json","overrideParameters":"","deploymentMode":"Incremental","enableDeploymentPrerequisites":"None","deploymentGroupEndpoint":"","project":"","deploymentGroupName":"","copyAzureVMTags":"true","runAgentServiceAsUser":"false","userName":"","password":"","outputVariable":"","deploymentName":"","deploymentOutputs":""}},{"environment":{},"taskId":"497d490f-eea7-4f2b-ab94-48d9c1acdcb1","version":"4.*","name":"Azure App Service Deploy: HotDay-shabib-SelfhealingFunction","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"ConnectionType":"AzureRM","ConnectedServiceName":"167cc6dc-cc14-40df-aadb-9ab505b378b1","PublishProfilePath":"$(System.DefaultWorkingDirectory)/**/*.pubxml","PublishProfilePassword":"","WebAppKind":"webApp","WebAppName":"HotDay-shabib-SelfhealingFunction","DeployToSlotOrASEFlag":"false","ResourceGroupName":"","SlotName":"production","DockerNamespace":"","DockerRepository":"","DockerImageTag":"","VirtualApplication":"","Package":"$(System.DefaultWorkingDirectory)/_UnbreakablePipelineDemo-CI/FunctionsCode/DynatraceSelfHealingFunction.zip","RuntimeStack":"","RuntimeStackFunction":"","StartupCommand":"","ScriptType":"","InlineScript":":: You can provide your deployment commands here. One command per line.","ScriptPath":"","WebConfigParameters":"","AppSettings":"","ConfigurationSettings":"","UseWebDeploy":"false","DeploymentType":"webDeploy","TakeAppOfflineFlag":"true","SetParametersFile":"","RemoveAdditionalFilesFlag":"false","ExcludeFilesFromAppDataFlag":"true","AdditionalArguments":"-retryAttempts:6 -retryInterval:10000","RenameFilesFlag":"true","XmlTransformation":"false","XmlVariableSubstitution":"false","JSONFiles":""}},{"environment":{},"taskId":"497d490f-eea7-4f2b-ab94-48d9c1acdcb1","version":"4.*","name":"Azure App Service Deploy: HotDay-shabib-MonspecValidation","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"ConnectionType":"AzureRM","ConnectedServiceName":"167cc6dc-cc14-40df-aadb-9ab505b378b1","PublishProfilePath":"$(System.DefaultWorkingDirectory)/**/*.pubxml","PublishProfilePassword":"","WebAppKind":"webApp","WebAppName":"HotDay-shabib-MonspecValidation","DeployToSlotOrASEFlag":"false","ResourceGroupName":"","SlotName":"production","DockerNamespace":"","DockerRepository":"","DockerImageTag":"","VirtualApplication":"","Package":"$(System.DefaultWorkingDirectory)/_UnbreakablePipelineDemo-CI/FunctionsCode/MonspecValidation.zip","RuntimeStack":"","RuntimeStackFunction":"","StartupCommand":"","ScriptType":"","InlineScript":":: You can provide your deployment commands here. One command per line.","ScriptPath":"","WebConfigParameters":"","AppSettings":"","ConfigurationSettings":"","UseWebDeploy":"false","DeploymentType":"webDeploy","TakeAppOfflineFlag":"true","SetParametersFile":"","RemoveAdditionalFilesFlag":"false","ExcludeFilesFromAppDataFlag":"true","AdditionalArguments":"-retryAttempts:6 -retryInterval:10000","RenameFilesFlag":"true","XmlTransformation":"false","XmlVariableSubstitution":"false","JSONFiles":""}},{"environment":{},"taskId":"94a74903-f93f-4075-884f-dc11f34058b4","version":"2.*","name":"Azure Deployment:Create Or Update Resource Group action on VstsResourceGroup-vstspipeline","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"ConnectedServiceName":"167cc6dc-cc14-40df-aadb-9ab505b378b1","action":"Create Or Update Resource Group","resourceGroupName":"VstsResourceGroup-vstspipeline","location":"South Central US","templateLocation":"Linked artifact","csmFileLink":"","csmParametersFileLink":"","csmFile":"$(System.DefaultWorkingDirectory)/_UnbreakablePipelineDemo-CI/ArmTemplates/VmArmTemplate.json","csmParametersFile":"","overrideParameters":"","deploymentMode":"Incremental","enableDeploymentPrerequisites":"ConfigureVMWithDGAgent","deploymentGroupEndpoint":"1e11898b-7504-4466-8ee6-0b23c9da55de","project":"UnbreakablePipelineDemo","deploymentGroupName":"UnbreakablePipelineDemoDG","copyAzureVMTags":"true","runAgentServiceAsUser":"false","userName":"","password":"","outputVariable":"","deploymentName":"","deploymentOutputs":""}}]},{"deploymentInput":{"healthPercent":0,"deploymentHealthOption":"Custom","tags":["Staging","Production"],"skipArtifactsDownload":false,"artifactsDownloadInput":{"downloadInputs":[{"artifactItems":[],"alias":"_UnbreakablePipelineDemo-CI","artifactType":"Build","artifactDownloadMode":"All"}]},"queueId":55,"demands":[],"enableAccessToken":false,"timeoutInMinutes":0,"jobCancelTimeoutInMinutes":1,"condition":"succeeded()","overrideInputs":{}},"rank":2,"phaseType":4,"name":"Deployment group job","refName":null,"workflowTasks":[{"environment":{},"taskId":"6c731c3c-3c68-459a-a5c9-bde6e6595b5b","version":"3.*","name":"Deploy Dynatrace OneAgent to the VM's","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"targetType":"inline","filePath":"","arguments":"","script":"# Download and Install the Dynatrace OneAgent\n# Please provide Dynatrace Tenant and Tenant Token in the Variables section \n\nwget  -O Dynatrace-OneAgent-Linux.sh  $(Dynatrace_Tenant)\"/api/v1/deployment/installer/agent/unix/default/latest?Api-Token=\"$(Dynatrace_Token)\"&arch=x86&flavor=default\"\n\necho \"https://\"$(Dynatrace_Tenant)\"/api/v1/deployment/installer/agent/unix/default/latest?Api-Token=\"$(Dynatrace_Token)\"&arch=x86&flavor=default\"\n\nsudo /bin/sh Dynatrace-OneAgent-Linux.sh  APP_LOG_CONTENT_ACCESS=1 INFRA_ONLY=0\n\n","workingDirectory":"","failOnStderr":"false"}},{"environment":{},"taskId":"6c731c3c-3c68-459a-a5c9-bde6e6595b5b","version":"3.*","name":"Install node and pm2 on the VM's ","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"targetType":"inline","filePath":"","arguments":"","script":"# Install Npm\ncurl -sL https://deb.nodesource.com/setup_10.x | sudo -E bash -\nsudo apt-get install -y nodejs\nnpm -v\n\n# Install pm2\nsudo npm install pm2 -g","workingDirectory":"","failOnStderr":"false"}}]}],"environmentOptions":{"emailNotificationType":"OnlyOnFailure","emailRecipients":"release.environment.owner;release.creator","skipArtifactsDownload":false,"timeoutInMinutes":0,"enableAccessToken":false,"publishDeploymentStatus":true,"badgeEnabled":false,"autoLinkWorkItems":false,"pullRequestDeploymentEnabled":false},"demands":[],"conditions":[{"name":"ReleaseStarted","conditionType":1,"value":""}],"executionPolicy":{"concurrencyCount":1,"queueDepthCount":0},"schedules":[],"currentRelease":{"id":1,"url":"https://vsrm.dev.azure.com/unbreakablepipeline/dc9f2e8c-6f91-47dd-ba4f-0ff52879732e/_apis/Release/releases/1","_links":{}},"retentionPolicy":{"daysToKeep":30,"releasesToKeep":3,"retainBuild":true},"processParameters":{},"properties":{},"preDeploymentGates":{"id":0,"gatesOptions":null,"gates":[]},"postDeploymentGates":{"id":0,"gatesOptions":null,"gates":[]},"environmentTriggers":[],"badgeUrl":"https://vsrm.dev.azure.com/unbreakablepipeline/_apis/public/Release/badge/dc9f2e8c-6f91-47dd-ba4f-0ff52879732e/1/1"}],"artifacts":[{"sourceId":"dc9f2e8c-6f91-47dd-ba4f-0ff52879732e:19","type":"Build","alias":"_UnbreakablePipelineDemo-CI","definitionReference":{"artifactSourceDefinitionUrl":{"id":"https://dev.azure.com/unbreakablepipeline/_permalink/_build/index?collectionId=38f54010-b5c4-41f0-88e0-3bca292f134a&projectId=dc9f2e8c-6f91-47dd-ba4f-0ff52879732e&definitionId=19","name":""},"defaultVersionBranch":{"id":"","name":""},"defaultVersionSpecific":{"id":"","name":""},"defaultVersionTags":{"id":"","name":""},"defaultVersionType":{"id":"latestType","name":"Latest"},"definition":{"id":"19","name":"UnbreakablePipelineDemo-CI"},"definitions":{"id":"","name":""},"IsMultiDefinitionType":{"id":"False","name":"False"},"project":{"id":"dc9f2e8c-6f91-47dd-ba4f-0ff52879732e","name":"UnbreakablePipelineDemo"},"repository":{"id":"003aadba-23a9-4397-9e8e-2607eec595f0","name":"UnbreakablePipelineDemo"}},"isPrimary":true,"isRetained":false}],"triggers":[],"releaseNameFormat":"Release-$(rev:r)","tags":[],"pipelineProcess":{"type":1},"properties":{"DefinitionCreationSource":{"$type":"System.String","$value":"Other"}},"id":1,"name":"Create Utilities","path":"\\","projectReference":null,"url":"https://vsrm.dev.azure.com/unbreakablepipeline/dc9f2e8c-6f91-47dd-ba4f-0ff52879732e/_apis/Release/definitions/1","_links":{"self":{"href":"https://vsrm.dev.azure.com/unbreakablepipeline/dc9f2e8c-6f91-47dd-ba4f-0ff52879732e/_apis/Release/definitions/1"},"web":{"href":"https://dev.azure.com/unbreakablepipeline/dc9f2e8c-6f91-47dd-ba4f-0ff52879732e/_release?definitionId=1"}}}